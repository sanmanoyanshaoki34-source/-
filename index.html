<!DOCTYPE html>

<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>å‰ä¸–ã§ã®ç½ª è¨ºæ–­æ›¸</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.2/babel.min.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700;900&family=Noto+Serif+JP:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { background: #05010f; min-height: 100vh; font-family: 'Noto Serif JP', serif; color: #e8d5b7; overflow-x: hidden; }
    #root { min-height: 100vh; }

```
.bg {
  position: fixed; inset: 0; overflow: hidden; z-index: 0;
  background: radial-gradient(ellipse at 25% 20%, #1a0533 0%, #05010f 55%),
              radial-gradient(ellipse at 80% 85%, #0d1a3a 0%, transparent 55%);
}
.particle {
  position: absolute; border-radius: 50%;
  background: radial-gradient(circle, #d4a017, transparent);
  opacity: 0;
}
.pentagram {
  position: fixed; top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  width: 600px; height: 600px; opacity: 0.04;
}
.pentagram svg { width: 100%; height: 100%; animation: spin 80s linear infinite; }
@keyframes spin { from { transform: rotate(0) } to { transform: rotate(360deg) } }

@keyframes floatP {
  0%, 100% { opacity: 0; transform: translateY(0) scale(1); }
  30% { opacity: 0.5; }
  60% { opacity: 0.2; }
  100% { opacity: 0; transform: translateY(-50px) scale(0.5); }
}

.container {
  position: relative; z-index: 1;
  max-width: 680px; margin: 0 auto;
  padding: 40px 20px 80px;
  min-height: 100vh;
}

.header { text-align: center; margin-bottom: 48px; }
.eyebrow {
  font-size: 11px; letter-spacing: 6px; color: #b8860b;
  text-transform: uppercase; margin-bottom: 14px; opacity: 0.8;
}
.title {
  font-family: 'Cinzel Decorative', serif;
  font-size: clamp(22px, 5vw, 38px); font-weight: 900;
  background: linear-gradient(135deg, #d4a017 0%, #f5e06e 40%, #c8860a 80%, #f0c040 100%);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent;
  background-clip: text; line-height: 1.3; margin-bottom: 18px;
  filter: drop-shadow(0 0 28px #d4a01766);
}
.subtitle { font-size: 13px; color: #a09070; letter-spacing: 1.5px; line-height: 2; }
.divider { display: flex; align-items: center; gap: 16px; margin: 32px 0; }
.divider-line { flex: 1; height: 1px; background: linear-gradient(90deg, transparent, #b8860b55, transparent); }
.divider-gem { color: #d4a017; font-size: 16px; filter: drop-shadow(0 0 8px #d4a017); }

.intro-description {
  background: linear-gradient(135deg, #0d0520, #150830);
  border: 1px solid #3a2060; border-radius: 16px;
  padding: 28px 32px; margin-bottom: 36px;
  font-size: 14px; color: #a09070; line-height: 2.2; text-align: center;
}
.intro-description strong { color: #d4b880; }

.btn {
  display: block; margin: 0 auto;
  padding: 18px 52px;
  font-family: 'Cinzel Decorative', serif; font-size: 14px; font-weight: 700;
  color: #05010f;
  background: linear-gradient(135deg, #d4a017, #f5e06e, #c8860a);
  border: none; border-radius: 50px; cursor: pointer;
  letter-spacing: 2px; transition: all 0.3s ease;
  box-shadow: 0 4px 30px #d4a01788; position: relative; overflow: hidden;
}
.btn:hover { transform: translateY(-2px); box-shadow: 0 8px 40px #d4a017aa; }
.btn::after {
  content: ''; position: absolute; inset: 0;
  background: linear-gradient(135deg, transparent 40%, #ffffff33);
  pointer-events: none;
}

.progress-track {
  width: 100%; height: 3px; background: #1a0060;
  border-radius: 2px; margin-bottom: 36px; overflow: hidden;
}
.progress-fill {
  height: 100%; background: linear-gradient(90deg, #9b1dff, #d4a017);
  border-radius: 2px; transition: width 0.5s ease;
  box-shadow: 0 0 10px #9b1dff88;
}
.question-counter {
  font-size: 11px; letter-spacing: 4px; color: #806040;
  text-align: center; margin-bottom: 24px; text-transform: uppercase;
}

.question-wrap { transition: opacity 0.25s ease, transform 0.25s ease; }
.question-wrap.out { opacity: 0; transform: translateX(20px); }
.question-wrap.in { opacity: 1; transform: translateX(0); }

.question-text {
  font-size: clamp(18px, 4vw, 24px); font-weight: 600;
  color: #e8d5b7; text-align: center; line-height: 1.7;
  margin-bottom: 36px; letter-spacing: 0.5px;
}
.choices { display: flex; flex-direction: column; gap: 14px; }
.choice-btn {
  background: linear-gradient(135deg, #0d0520, #150830);
  border: 1px solid #3a2060; border-radius: 14px;
  padding: 20px 24px; cursor: pointer; text-align: left;
  transition: all 0.25s ease; position: relative; overflow: hidden;
  display: flex; align-items: center; gap: 16px;
  font-family: 'Noto Serif JP', serif; width: 100%;
}
.choice-btn::before {
  content: ''; position: absolute; inset: 0;
  background: radial-gradient(circle at 0% 50%, #9b1dff22, transparent 60%);
  opacity: 0; transition: opacity 0.3s;
}
.choice-btn:hover { border-color: #7a40d0; transform: translateX(4px); box-shadow: 0 6px 24px #9b1dff33; }
.choice-btn:hover::before { opacity: 1; }
.choice-label {
  width: 28px; height: 28px; border-radius: 50%;
  border: 1px solid #3a2060; display: flex; align-items: center; justify-content: center;
  font-size: 11px; color: #806040; flex-shrink: 0; transition: all 0.25s;
}
.choice-btn:hover .choice-label { border-color: #d4a017; color: #d4a017; background: #d4a01722; }
.choice-text { font-size: 15px; color: #c8a878; line-height: 1.5; }

.back-link {
  display: block; margin-top: 28px; text-align: center;
  font-size: 12px; color: #503820; letter-spacing: 2px;
  cursor: pointer; transition: color 0.2s;
  background: none; border: none; font-family: 'Noto Serif JP', serif;
  width: 100%;
}
.back-link:hover { color: #806040; }

.ritual {
  display: flex; flex-direction: column; align-items: center;
  justify-content: center; min-height: 65vh; gap: 28px;
}
.ritual-orb {
  width: 150px; height: 150px; border-radius: 50%;
  background: radial-gradient(circle at 35% 35%, #7a40d0, #1a0060, #000);
  box-shadow: 0 0 60px #9b1dff88, 0 0 120px #9b1dff44, inset 0 0 40px #d4a01744;
  animation: pulse 1.2s ease-in-out infinite;
  display: flex; align-items: center; justify-content: center; font-size: 56px;
}
@keyframes pulse {
  0%, 100% { transform: scale(1); box-shadow: 0 0 60px #9b1dff88, 0 0 120px #9b1dff44; }
  50% { transform: scale(1.08); box-shadow: 0 0 80px #9b1dffaa, 0 0 160px #9b1dff66; }
}
.ritual-text {
  font-size: 17px; color: #c8a060; letter-spacing: 2px;
  animation: flickerIn 0.4s ease; text-align: center;
}
@keyframes flickerIn {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}
.ritual-bar { width: 220px; height: 3px; background: #1a0060; border-radius: 2px; overflow: hidden; }
.ritual-bar-fill {
  height: 100%; background: linear-gradient(90deg, #9b1dff, #d4a017);
  border-radius: 2px; transition: width 0.75s ease; box-shadow: 0 0 12px #9b1dff;
}

.result-card {
  background: linear-gradient(160deg, #0a0220, #12042e, #080118);
  border: 1px solid #3a2060; border-radius: 24px;
  padding: 48px 36px; text-align: center; position: relative; overflow: hidden;
  opacity: 0; transform: scale(0.95) translateY(20px);
  transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);
}
.result-card.revealed { opacity: 1; transform: scale(1) translateY(0); }
.result-card::before {
  content: ''; position: absolute; inset: 0;
  background: radial-gradient(circle at 50% -10%, var(--ac) 0%, transparent 60%);
  opacity: 0.07; pointer-events: none;
}
.result-era { font-size: 11px; letter-spacing: 4px; color: #806040; margin-bottom: 20px; text-transform: uppercase; }
.result-icon {
  font-size: 72px; margin-bottom: 16px; display: block;
  filter: drop-shadow(0 0 20px var(--ac));
  animation: iconFloat 3s ease-in-out infinite;
}
@keyframes iconFloat { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-8px); } }
.result-title {
  font-family: 'Cinzel Decorative', serif;
  font-size: clamp(26px, 6vw, 42px); font-weight: 900;
  color: var(--ac); margin-bottom: 8px;
  filter: drop-shadow(0 0 20px var(--ac)); line-height: 1.2;
}
.glow-line {
  width: 80px; height: 2px;
  background: linear-gradient(90deg, transparent, var(--ac), transparent);
  margin: 20px auto; border-radius: 1px;
}
.result-summary { font-size: 16px; color: #c8a878; margin: 20px 0; line-height: 1.9; letter-spacing: 0.5px; }
.result-detail {
  background: #0d0230; border: 1px solid #2a1550; border-radius: 16px;
  padding: 24px; margin: 24px 0;
  font-size: 14px; color: #a09070; line-height: 2.1; text-align: left;
}
.sin-box { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; margin: 24px 0; }
.sin-item {
  background: linear-gradient(135deg, #0f0128, #180840);
  border: 1px solid #3a2060; border-radius: 12px; padding: 16px; text-align: left;
}
.sin-label { font-size: 10px; color: #b8860b; letter-spacing: 3px; text-transform: uppercase; margin-bottom: 8px; }
.sin-text { font-size: 13px; color: #d4b880; line-height: 1.6; }
.reset-btn {
  margin-top: 32px; background: transparent; border: 1px solid #3a2060;
  color: #806040; padding: 12px 32px; border-radius: 50px; cursor: pointer;
  font-family: 'Noto Serif JP', serif; font-size: 13px; letter-spacing: 2px; transition: all 0.3s;
}
.reset-btn:hover { border-color: #d4a017; color: #d4a017; box-shadow: 0 0 20px #d4a01733; }

@media (max-width: 500px) {
  .sin-box { grid-template-columns: 1fr; }
  .result-card { padding: 32px 18px; }
  .intro-description { padding: 20px; }
}
```

  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useRef } = React;

    const questions = [
      {
        id: 1,
        text: "å¾…ã¡åˆã‚ã›ã®æ™‚é–“ã«é…ã‚Œã‚‹ã“ã¨ãŒå¤šã„",
        choices: ["ã»ã¼æ¯å›é…ã‚Œã‚‹", "ãŸã¾ã«é…ã‚Œã‚‹", "ã‚€ã—ã‚æ—©ãç€ã"],
        scores: { late: [3, 1, 0] },
      },
      {
        id: 2,
        text: "ãƒ©ãƒ³ãƒã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’æ±ºã‚ã‚‹ã®ã«ä½•åˆ†ã‹ã‹ã‚‹ï¼Ÿ",
        choices: ["10åˆ†ä»¥ä¸Šæ‚©ã‚€", "3ã€œ5åˆ†ã¯æ‚©ã‚€", "ç§’ã§æ±ºã‚ã‚‹"],
        scores: { indecisive: [3, 1, 0] },
      },
      {
        id: 3,
        text: "æœºã‚„ãƒ‡ã‚¹ã‚¯ã®ä¸Šã®çŠ¶æ…‹ã¯ï¼Ÿ",
        choices: ["ã‚«ã‚ªã‚¹ãƒ»ä½•ãŒã©ã“ã«ã‚ã‚‹ã‹ä¸æ˜", "ã¾ã‚ã¾ã‚æ•£ã‚‰ã‹ã£ã¦ã‚‹", "ã„ã¤ã‚‚æ•´ç†ã•ã‚Œã¦ã‚‹"],
        scores: { messy: [3, 1, 0] },
      },
      {
        id: 4,
        text: "LINEã‚„ãƒ¡ãƒ¼ãƒ«ã®è¿”ä¿¡ãŒ",
        choices: ["æ•°æ—¥ã€œæ•°é€±é–“å¾Œã«ãªã‚‹ã“ã¨ãŒã‚ã‚‹", "1æ—¥ä»¥å†…ã«ã¯è¿”ã™", "å³ãƒ¬ã‚¹æ´¾"],
        scores: { forgetful: [3, 1, 0] },
      },
      {
        id: 5,
        text: "é£Ÿã¹ç‰©ã‚’ã‚·ã‚§ã‚¢ã™ã‚‹ã¨ã",
        choices: ["ä¸€ç•ªã†ã¾ãã†ãªã®ã¯ç¢ºä¿ã™ã‚‹", "æ™®é€šã«åˆ†ã‘ã‚‹", "ç›¸æ‰‹ã«å¤šã‚ã«è­²ã‚‹"],
        scores: { greedy: [3, 1, 0] },
      },
      {
        id: 6,
        text: "è‡ªåˆ†ã‚’å¤§ããè¦‹ã›ã‚‹ãŸã‚ã€å°‘ã—ç››ã‚‹ã“ã¨ãŒã‚ã‚‹",
        choices: ["ã‚ã‚Šã¨ã‚ˆãã‚ã‚‹", "ãŸã¾ã«ã‚ã‚‹", "ã»ã¼ã—ãªã„"],
        scores: { liar: [3, 1, 0] },
      },
      {
        id: 7,
        text: "å‹é”ã®è©±ã§ä¸€ç•ªç››ã‚Šä¸ŠãŒã‚‹ã®ã¯ï¼Ÿ",
        choices: ["èª°ã‹ã®å™‚ã‚„ç§˜å¯†ã®è©±", "è¶£å‘³ã‚„ä½“é¨“ã®è©±", "ç¤¾ä¼šã‚„ä»•äº‹ã®è©±"],
        scores: { gossip: [3, 1, 0] },
      },
      {
        id: 8,
        text: "è‡ªåˆ†ãŒé–“é•ã£ã¦ã„ãŸã¨æ°—ã¥ã„ãŸã¨ã",
        choices: ["èªã‚ãŸããªã„ãƒ»è¨€ã„è¨³ã—ã¦ã—ã¾ã†", "ã—ã¶ã—ã¶èªã‚ã‚‹", "ç´ ç›´ã«è¬ã‚Œã‚‹"],
        scores: { stubborn: [3, 1, 0] },
      },
      {
        id: 9,
        text: "å‹äººã®è‡ªæ…¢è©±ã‚„æˆåŠŸã‚’èã„ãŸã¨ã",
        choices: ["å°‘ã—ãƒ¢ãƒ¤ã£ã¨ã™ã‚‹", "è¤‡é›‘ãªæ°—æŒã¡ã«ã¯ãªã‚‹", "ç´ ç›´ã«ãŠã‚ã§ã¨ã†ã¨æ€ãˆã‚‹"],
        scores: { jealous: [3, 1, 0] },
      },
      {
        id: 10,
        text: "SNSã«æŠ•ç¨¿ã™ã‚‹ã¨ãã€é€ä¿¡å‰ã«ä½•åº¦ç¢ºèªã™ã‚‹ï¼Ÿ",
        choices: ["5å›ä»¥ä¸Šãƒ»ä½•åº¦ã‚‚èª­ã¿è¿”ã™", "2ã€œ3å›ã¯ç¢ºèªã™ã‚‹", "ã‚µã‚¯ãƒƒã¨æŠ•ç¨¿ã§ãã‚‹"],
        scores: { overthink: [3, 1, 0] },
      },
    ];

    const results = [
      {
        key: "dark_lord",
        title: "æš—é»’é­”ç‹",
        era: "ä¸­ä¸–ãƒ•ã‚¡ãƒ³ã‚¿ã‚¸ãƒ¼ä¸–ç•Œãƒ»ç´„800å¹´å‰",
        icon: "ğŸ‘‘",
        color: "#9b1dff",
        summary: "ã‚ãªãŸã®å‰ä¸–ã¯ã€ä¸ƒã¤ã®ç‹å›½ã‚’ææ€–ã§æ”¯é…ã—ãŸæš—é»’é­”ç‹ã§ã—ãŸã€‚",
        detail: "æ¯æœ9æ™‚ã«å§‹ã¾ã‚‹ã€Œææ€–ã®è¬è¦‹ã€ã¯æ¯å›30åˆ†é…ã‚Œã§ã‚¹ã‚¿ãƒ¼ãƒˆã€‚é…ä¸‹ã®æ‚ªé­”ãŸã¡ã¯å»Šä¸‹ã§éœ‡ãˆãªãŒã‚‰å¾…ã£ã¦ã„ã¾ã—ãŸã€‚ã€Œæ»…ã³ã®å‘ªæ–‡ã€ã‚’ä½¿ãŠã†ã¨ã™ã‚‹ãŸã³ã«ã€Œãˆãƒ¼ã£ã¨â€¦ç«ã«ã—ã‚ˆã†ã‹ã€æ°·ã«ã—ã‚ˆã†ã‹â€¦ã€ã¨æ‚©ã¿ç¶šã‘ã€çµå±€æ‘ã¯ç„¡äº‹ã«å¸°ã—ã¦ã—ã¾ã†ã“ã¨ã‚‚å¤šã€…ã€‚éƒ¨ä¸‹ã‹ã‚‰ã€Œå„ªã—ã„æš—é»’é­”ç‹ã€ã¨é™°ã§å‘¼ã°ã‚Œã¦ã„ã¾ã—ãŸã€‚",
        sin: "ä¸–ç•Œå¾æœã‚’å¾Œå›ã—ã«ã—ç¶šã‘ãŸå¤§ç½ª",
        karma: "é…åˆ»ç™–ã¨å„ªæŸ”ä¸æ–­ã¨ã—ã¦ç¾ä¸–ã«æŒã¡è¶Šã—ä¸­",
        traits: ["late", "indecisive"],
      },
      {
        key: "pirate",
        title: "æµ·è³Šå¤§ç‹",
        era: "å¤§èˆªæµ·æ™‚ä»£ãƒ»ç´„400å¹´å‰",
        icon: "ğŸ´â€â˜ ï¸",
        color: "#c8720a",
        summary: "ã‚ãªãŸã®å‰ä¸–ã¯ã€ä¸ƒã¤ã®æµ·ã‚’è’ã‚‰ã—å›ã£ãŸä¼èª¬ã®æµ·è³Šå¤§ç‹ã§ã—ãŸã€‚",
        detail: "ã€Œå¤œæ˜ã‘ã«å‡ºæ¸¯ï¼ã€ã¨å®£è¨€ã—ãªãŒã‚‰æ¯å›æ˜¼éãã«å‡ºç™ºã€‚ç•¥å¥ªã—ãŸè²¡å®ã¯ã©ã“ã«éš ã—ãŸã‹è‡ªåˆ†ã§ã‚‚å¿˜ã‚Œã€å®ã®åœ°å›³ã‚’3æšä½œã£ã¦å…¨éƒ¨ãªãã—ã¾ã—ãŸã€‚èˆ¹å“¡ã®å™‚è©±ãŒå¤§å¥½ãã§ã€ã€Œã‚ã®æ¸¯ã®é…’å ´ã®ãŠã‹ã¿ã•ã‚“ãŒã•ã€œã€ã¨è©±ã—ã‹ã‘ã¦åµã‚’è¦‹é€ƒã—ãŸã“ã¨ã‚‚ã€‚",
        sin: "è²¡å®ã‚ˆã‚Šã‚‚äººã®è©±ã‚’å„ªå…ˆã—ãŸç½ª",
        karma: "å¿˜ã‚Œã£ã½ã•ã¨å™‚å¥½ãã¨ã—ã¦ç¾ä¸–ã«æŒã¡è¶Šã—ä¸­",
        traits: ["gossip", "forgetful"],
      },
      {
        key: "witch",
        title: "å‘ªã„ã®é­”å¥³",
        era: "ãƒ«ãƒã‚µãƒ³ã‚¹æœŸãƒ¨ãƒ¼ãƒ­ãƒƒãƒ‘ãƒ»ç´„500å¹´å‰",
        icon: "ğŸ§™â€â™€ï¸",
        color: "#2d8a4e",
        summary: "ã‚ãªãŸã®å‰ä¸–ã¯ã€æ£®ã®å¥¥ã«æ½œã‚€ææ€–ã®å‘ªã„ã®é­”å¥³ã§ã—ãŸã€‚",
        detail: "å‘ªã„ã‚’ã‹ã‘ã‚ˆã†ã¨ã™ã‚‹ãŸã³ã«ææ–™ã‚’åˆ‡ã‚‰ã—ã€ã€Œã‚ã£ã€ãƒãƒ³ãƒ‰ãƒ©ã‚´ã‚¢è²·ã„å¿˜ã‚ŒãŸã€ã¨æ£®ã‚’å¾€å¾©ã€‚é‹ã®ä¸­ã¯ã„ã¤ã‚‚ã‚«ã‚ªã‚¹ã§ã€ä½•ã®è–¬ã‚’ä½œã£ã¦ã„ãŸã‹é€”ä¸­ã§ã‚ã‹ã‚‰ãªããªã‚‹ã“ã¨ã‚‚ã€‚æ‘äººã‚’å‘ªã„ã«æ¥ãŸäººãŒã€Œã“ã®å®¶ã€ã™ã”ã„é­”åŠ›ã ï¼ˆæ•£ã‚‰ã‹ã£ã¦ã‚‹ã ã‘ï¼‰ã€ã¨å‹˜é•ã„ã—ã¦å¸°ã£ã¦ã„ãã¾ã—ãŸã€‚",
        sin: "å‘ªã„ã‚’å®Œæˆã•ã›ãªã‹ã£ãŸæ€ æ…¢ã®ç½ª",
        karma: "éƒ¨å±‹ã®æ•£ã‚‰ã‹ã‚Šã¨é¢å€’ãã•ãŒã‚Šã¨ã—ã¦ç¾ä¸–ã«æŒã¡è¶Šã—ä¸­",
        traits: ["messy", "lazy"],
      },
      {
        key: "emperor",
        title: "æš´å›çš‡å¸",
        era: "å¤ä»£ãƒ­ãƒ¼ãƒãƒ»ç´„2000å¹´å‰",
        icon: "ğŸ›ï¸",
        color: "#c41a1a",
        summary: "ã‚ãªãŸã®å‰ä¸–ã¯ã€æ°‘ã‚’è‹¦ã—ã‚ãŸå¤ä»£ãƒ­ãƒ¼ãƒã®æš´å›çš‡å¸ã§ã—ãŸã€‚",
        detail: "å®´ä¼šã§ä¸€ç•ªã†ã¾ã„ã‚‚ã®ã‚’å…¨éƒ¨è‡ªåˆ†ã§é£Ÿã¹ã¤ãã—ã€ã€Œã“ã‚Œã¯çš‡å¸ã®ç‰¹æ¨©ï¼ã€ã¨è¨€ã„å¼µã‚Šã¾ã—ãŸã€‚å…ƒè€é™¢ã§ã®è­°è«–ã§ã¯ä¸€åº¦ã‚‚æŠ˜ã‚ŒãŸã“ã¨ãŒãªãã€è² ã‘ãã†ã«ãªã‚‹ã¨ã€Œã“ã‚Œã¯çš‡å¸å‘½ä»¤ï¼ã€ã§å¼·å¼•ã«çµ‚ã‚ã‚‰ã›ã¦ã„ã¾ã—ãŸã€‚é…ä¸‹ã¸ã®è¿”ä¿¡ã¯å¹³å‡3é€±é–“å¾Œã€‚ã€Œçš‡å¸ã¯ãŠå¿™ã—ã„ã€ã¨ã„ã†ã®ãŒè¨€ã„è¨³ã§ã—ãŸã€‚",
        sin: "ç‹¬å ã¨é ‘å›ºã«ã‚ˆã‚‹æ°‘ã®ç–²å¼Š",
        karma: "é£Ÿã„æ„åœ°ã¨é ‘å›ºã•ã¨ã—ã¦ç¾ä¸–ã«æŒã¡è¶Šã—ä¸­",
        traits: ["greedy", "stubborn"],
      },
      {
        key: "spy",
        title: "å‡„è…•äºŒé‡ã‚¹ãƒ‘ã‚¤",
        era: "è¿‘ä»£ãƒ¨ãƒ¼ãƒ­ãƒƒãƒ‘ãƒ»ç´„100å¹´å‰",
        icon: "ğŸ•µï¸",
        color: "#1a6b8a",
        summary: "ã‚ãªãŸã®å‰ä¸–ã¯ã€å›½å®¶æ©Ÿå¯†ã‚’å£²ã‚Šæ­©ã„ãŸå‡„è…•äºŒé‡ã‚¹ãƒ‘ã‚¤ã§ã—ãŸã€‚",
        detail: "ã©ã®å›½ã«ã‚‚ã€Œè‡ªåˆ†ã“ãæœ¬å½“ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã ã€ã¨è¦‹æ „ã‚’å¼µã‚Šç¶šã‘ã€10ã‚«å›½ã¨åŒæ™‚ã«å¥‘ç´„ã‚’çµã‚“ã§ã„ã¾ã—ãŸã€‚ã€ŒçœŸå®Ÿã¯ã“ã†ã ã€ã¨å˜˜ã‚’ã¤ã„ã¦ã‚‚ã™ããƒãƒ¬ã€ã€Œã„ã‚„ã€ã‚ã‚Œã¯æˆ¦ç•¥çš„ãªå˜˜ã ã€ã¨è¨€ã„è¨³ã€‚å¾…ã¡åˆã‚ã›ã«ã¯å¿…ãšé…åˆ»ã—ã€ã€Œé…ã‚ŒãŸã®ã¯å°¾è¡Œã‚’æ’’ã„ã¦ã„ãŸã‹ã‚‰ã€ã¨å¤©æ‰çš„ãªè¨€ã„è¨³ã§åˆ‡ã‚ŠæŠœã‘ã¦ã„ã¾ã—ãŸã€‚",
        sin: "è™šæ „å¿ƒã«ã‚ˆã‚‹å›½éš›ç§©åºã®æ··ä¹±",
        karma: "è¦‹æ „ã£å¼µã‚Šã¨å°ã•ãªå˜˜ã¨ã—ã¦ç¾ä¸–ã«æŒã¡è¶Šã—ä¸­",
        traits: ["liar", "jealous"],
      },
      {
        key: "ninja",
        title: "è£åˆ‡ã‚Šå¿è€…",
        era: "æˆ¦å›½æ™‚ä»£ãƒ»ç´„450å¹´å‰",
        icon: "ğŸ¥·",
        color: "#4a4a9a",
        summary: "ã‚ãªãŸã®å‰ä¸–ã¯ã€ä¸»å›ã‚’æ¬¡ã€…ã¨å¤‰ãˆãŸä¼èª¬ã®è£åˆ‡ã‚Šå¿è€…ã§ã—ãŸã€‚",
        detail: "ã€Œä»Šåº¦ã“ãå¿ ç¾©ã‚’å°½ãã™ã€ã¨æ€ã†ãŸã³ã«éš£ã®è—©ã®æ¡ä»¶ãŒæ°—ã«ãªã‚Šå§‹ã‚ã€ç”Ÿæ¶¯ã§17äººã®ä¸»å›ã«ä»•ãˆã¾ã—ãŸã€‚ä»»å‹™ã®é€”ä¸­ã§ã€Œã“ã‚Œæœ¬å½“ã«æ­£ã—ã„é¸æŠãªã®ã‹â€¦ã€ã¨å±‹æ ¹ã®ä¸Šã§æ‚©ã¿ã™ãã¦å¤œæ˜ã‘ã‚’è¿ãˆãŸã“ã¨ã‚‚å¤šæ•°ã€‚é€ã£ãŸã¯ãšã®å¯†æ›¸ãŒä¸‹æ›¸ãã®ã¾ã¾æ®‹ã£ã¦ã„ãŸã“ã¨ã‚‚ã€‚",
        sin: "æ±ºæ–­ã§ããšã«æ­´å²ã‚’å¤‰ãˆæã­ãŸç½ª",
        karma: "å„ªæŸ”ä¸æ–­ã¨è€ƒãˆã™ãã¨ã—ã¦ç¾ä¸–ã«æŒã¡è¶Šã—ä¸­",
        traits: ["indecisive", "overthink"],
      },
    ];

    function calcResult(answers) {
      const scores = {};
      questions.forEach((q, i) => {
        const idx = answers[i];
        if (idx === undefined) return;
        Object.entries(q.scores).forEach(([trait, vals]) => {
          scores[trait] = (scores[trait] || 0) + (vals[idx] ?? 0);
        });
      });
      let best = results[0];
      let bestScore = -1;
      results.forEach((r) => {
        const s = r.traits.reduce((sum, t) => sum + (scores[t] || 0), 0);
        if (s > bestScore) { bestScore = s; best = r; }
      });
      return best;
    }

    function App() {
      const [phase, setPhase] = useState("intro");
      const [current, setCurrent] = useState(0);
      const [answers, setAnswers] = useState({});
      const [result, setResult] = useState(null);
      const [ritualStep, setRitualStep] = useState(0);
      const [particles, setParticles] = useState([]);
      const [revealed, setRevealed] = useState(false);
      const [animIn, setAnimIn] = useState(true);

      useEffect(() => {
        setParticles(Array.from({ length: 20 }, (_, i) => ({
          id: i,
          x: Math.random() * 100,
          y: Math.random() * 100,
          size: Math.random() * 3 + 1,
          delay: Math.random() * 4,
          duration: Math.random() * 6 + 4,
        })));
      }, []);

      const selectAnswer = (idx) => {
        const newAnswers = { ...answers, [current]: idx };
        setAnswers(newAnswers);
        if (current < questions.length - 1) {
          setAnimIn(false);
          setTimeout(() => { setCurrent(current + 1); setAnimIn(true); }, 250);
        } else {
          const r = calcResult(newAnswers);
          setResult(r);
          setPhase("ritual");
          setRitualStep(0);
          let step = 0;
          const iv = setInterval(() => {
            step++;
            setRitualStep(step);
            if (step >= 4) {
              clearInterval(iv);
              setTimeout(() => {
                setPhase("result");
                setTimeout(() => setRevealed(true), 300);
              }, 600);
            }
          }, 750);
        }
      };

      const goBack = () => {
        if (current === 0) return;
        setAnimIn(false);
        setTimeout(() => { setCurrent(current - 1); setAnimIn(true); }, 250);
      };

      const reset = () => {
        setPhase("intro"); setCurrent(0); setAnswers({});
        setResult(null); setRitualStep(0); setRevealed(false); setAnimIn(true);
      };

      const ritualTexts = [
        "ğŸ”® éå»ã®æ¥­ã‚’èª­ã¿è§£ã„ã¦ã„ã¾ã™â€¦",
        "ğŸ“œ ã‚¢ã‚«ã‚·ãƒƒã‚¯ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’æ¤œç´¢ä¸­â€¦",
        "âš¡ å‰ä¸–ã®è¨˜æ†¶ãŒæµ®ã‹ã³ä¸ŠãŒã‚‹â€¦",
        "ğŸ’€ ã‚ãªãŸã®ç½ªãŒæ˜ã‚‰ã‹ã«ãªã‚‹â€¦",
      ];

      const progress = (current / questions.length) * 100;

      return (
        <>
          <div className="bg">
            {particles.map((p) => (
              <div key={p.id} className="particle" style={{
                left: `${p.x}%`, top: `${p.y}%`,
                width: p.size, height: p.size,
                animation: `floatP ${p.duration}s ${p.delay}s ease-in-out infinite`,
              }} />
            ))}
            <div className="pentagram">
              <svg viewBox="0 0 200 200" fill="none">
                <circle cx="100" cy="100" r="95" stroke="#d4a017" strokeWidth="0.5" />
                <circle cx="100" cy="100" r="75" stroke="#d4a017" strokeWidth="0.5" />
                <polygon points="100,10 122,78 194,78 136,122 158,190 100,146 42,190 64,122 6,78 78,78"
                  stroke="#d4a017" strokeWidth="0.5" fill="none" />
              </svg>
            </div>
          </div>

          <div className="container">
            {phase === "intro" && (
              <>
                <div className="header">
                  <p className="eyebrow">âœ¦ Akashic Oracle âœ¦</p>
                  <h1 className="title">å‰ä¸–ã§ã®ç½ª<br />è¨ºæ–­æ›¸</h1>
                  <p className="subtitle">ç¾ä¸–ã«æ®‹ã‚‹ã‚ãªãŸã®æ¬ ç‚¹ã¯ã€<br />å‰ä¸–ã§çŠ¯ã—ãŸç½ªã®æ¥­ï¼ˆã‚«ãƒ«ãƒï¼‰ã§ã‚ã‚‹ã€‚</p>
                </div>
                <div className="divider">
                  <div className="divider-line" /><div className="divider-gem">â—†</div><div className="divider-line" />
                </div>
                <div className="intro-description">
                  <strong>10ã®å•ã„</strong>ã«ç­”ãˆã‚‹ã¨ã€<br />
                  ã‚ãªãŸã®å‰ä¸–ã§ã®æ‰€æ¥­ã¨<br />
                  çŠ¯ã—ãŸå¤§ç½ªãŒæ˜ã‹ã•ã‚Œã‚‹ã€‚<br /><br />
                  <span style={{ fontSize: "12px", color: "#604030" }}>â€» ç›´æ„Ÿã§ãŠç­”ãˆãã ã•ã„ã€‚è€ƒãˆã™ãã¯ç¦ç‰©ã§ã™ã€‚</span>
                </div>
                <button className="btn" onClick={() => setPhase("quiz")}>è¨ºæ–­ã‚’å§‹ã‚ã‚‹</button>
              </>
            )}

            {phase === "quiz" && (
              <>
                <div className="progress-track">
                  <div className="progress-fill" style={{ width: `${progress}%` }} />
                </div>
                <p className="question-counter">Question {current + 1} / {questions.length}</p>
                <div className={`question-wrap ${animIn ? "in" : "out"}`}>
                  <p className="question-text">{questions[current].text}</p>
                  <div className="choices">
                    {questions[current].choices.map((c, i) => (
                      <button key={i} className="choice-btn" onClick={() => selectAnswer(i)}>
                        <span className="choice-label">{["A", "B", "C"][i]}</span>
                        <span className="choice-text">{c}</span>
                      </button>
                    ))}
                  </div>
                </div>
                {current > 0 && (
                  <button className="back-link" onClick={goBack}>â† å‰ã®å•ã„ã«æˆ»ã‚‹</button>
                )}
              </>
            )}

            {phase === "ritual" && (
              <div className="ritual">
                <div className="ritual-orb">ğŸ”®</div>
                <p className="ritual-text" key={ritualStep}>
                  {ritualTexts[Math.min(ritualStep, ritualTexts.length - 1)]}
                </p>
                <div className="ritual-bar">
                  <div className="ritual-bar-fill" style={{ width: `${((ritualStep + 1) / 5) * 100}%` }} />
                </div>
              </div>
            )}

            {phase === "result" && result && (
              <>
                <div className="header" style={{ marginBottom: 32 }}>
                  <p className="eyebrow">âœ¦ å¯©åˆ¤ âœ¦</p>
                  <h1 className="title">ã‚ãªãŸã®å‰ä¸–ãŒ<br />åˆ¤æ˜ã—ãŸ</h1>
                </div>
                <div
                  className={`result-card${revealed ? " revealed" : ""}`}
                  style={{ "--ac": result.color }}
                >
                  <p className="result-era">ğŸ“œ {result.era}</p>
                  <span className="result-icon">{result.icon}</span>
                  <h2 className="result-title">{result.title}</h2>
                  <div className="glow-line" />
                  <p className="result-summary">{result.summary}</p>
                  <div className="result-detail">
                    <strong style={{ color: "#d4b880", display: "block", marginBottom: 12 }}>â”€ å‰ä¸–ã§ã®æ‰€æ¥­ â”€</strong>
                    {result.detail}
                  </div>
                  <div className="sin-box">
                    <div className="sin-item">
                      <p className="sin-label">âš¡ å‰ä¸–ã®å¤§ç½ª</p>
                      <p className="sin-text">{result.sin}</p>
                    </div>
                    <div className="sin-item">
                      <p className="sin-label">â™¾ï¸ ç¾ä¸–ã¸ã®å½±éŸ¿</p>
                      <p className="sin-text">{result.karma}</p>
                    </div>
                  </div>
                  <button className="reset-btn" onClick={reset}>â†º ã‚‚ã†ä¸€åº¦è¨ºæ–­ã™ã‚‹</button>
                </div>
              </>
            )}
          </div>
        </>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById("root"));
    root.render(<App />);
  </script>

</body>
</html>
